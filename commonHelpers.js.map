{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/icon-error.svg","../src/img/Oops.png","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImages(userData, currentPage) {\n    try {\n        axios.defaults.baseURL = 'https://pixabay.com/api/';\n        const params = {    \n            key: '44328072-f56b95eb73841ff5e619bc345',\n            q: userData,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            per_page: 12,\n            page: currentPage,\n        }    \n        const res = await axios.get('', { params });\n        return res.data;\n    } catch (err) {\n        console.log(`Error: ${err}`);\n    }\n}","function createImage(image) {\n  let { largeImageURL, webformatURL, tags, comments, downloads, likes, views } = image;\n  return `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=${largeImageURL}>\n      <div class=\"img-container\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n      </div>\n      <ul class=\"gallery-text\">\n      <li class=\"gallery-text-property\">\n        <p class=\"gallery-text-dscr\">Likes</p>\n        <p class=\"gallery-text-count\">${likes}</p>\n      </li>\n      <li class=\"gallery-text-property\">\n        <p class=\"gallery-text-dscr\">Views</p>\n        <p class=\"gallery-text-count\">${views}</p>\n      </li>\n      <li class=\"gallery-text-property\">\n        <p class=\"gallery-text-dscr\">Comments</p>\n        <p class=\"gallery-text-count\">${comments}</p>\n      </li>\n      <li class=\"gallery-text-property\">\n        <p class=\"gallery-text-dscr\">Downloads</p>\n        <p class=\"gallery-text-count\">${downloads}</p>\n      </li>\n    </ul>\n    </a>     \n  </li>`;\n};\n\nexport function createImagesList(images) {\n  return images.map(createImage).join('');\n};","export default \"__VITE_ASSET__eb775c6f__\"","export default \"__VITE_ASSET__ee35290f__\"","import { getImages } from \"./js/pixabay-api.js\";\nimport { createImagesList } from \"./js/render-functions.js\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport imageUrlError from './img/icon-error.svg';\nimport imageUrlInfo from './img/Oops.png';\n\n//!======================================================\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst options = document.querySelector('.options');\nconst moreBtn = document.querySelector('.load-btn');\nconst loader = document.querySelector('.loader');\n\n//!======================================================\n\nlet userData = '';\nlet currentPage = 1;\nlet maxPage = 1;\nconst perPage = 12;\n\n//!======================================================\n\nconst lightbox = new SimpleLightbox('.gallery-item a', {\n    captions: true,\n    captionSelector: 'img',\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 500,\n    animationSpeed: 200,\n    widthRatio: 1,\n    heightRatio: 0.95,\n});\nasync function loadAllImages() {\n    const imageLoadPromises = Array.from(gallery.querySelectorAll('img')).map(image => new Promise(resolve => {\n        image.onload = resolve;\n    })); await Promise.all(imageLoadPromises);\n}\nfunction showLoader() {\n    loader.style.display = 'block';\n}\nfunction hideLoader() {\n    loader.style.display = 'none';\n}\nfunction showLoadBtn() {\n    options.classList.add('is-visible');\n}\nfunction hideLoadBtn() {\n    options.classList.remove('is-visible');\n}\nfunction updateStatusBtn() {\n    if (currentPage >= maxPage) {\n        hideLoadBtn();\n        if (maxPage) {\n            iziToast.info({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    messageSize: '16',\n                    messageLineHeight: '1,5',\n                    messageColor: '#01090f',\n                    backgroundColor: '#d6e288',\n                    position: 'bottomRight',\n                    close: true,\n                    closeOnClick: true,\n                    closeOnEscape: true,\n                    progressBar: true,\n                    progressBarColor: '#9aa406',\n                    transitionIn: 'fadeInDown',\n                    transitionOut: 'fadeOutUp',\n                    iconUrl: imageUrlInfo,\n                    iconColor: '#fafafb',\n            });\n        }\n    } else {\n        showLoadBtn();\n    }\n}\nfunction scrollDown() {\n    const liElem = gallery.children[0];\n    const height = liElem.getBoundingClientRect().height;\n    window.scrollBy({\n        top: height*3,\n        behavior: 'smooth',\n    });\n}\n\n//!======================================================\n\nform.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    userData = e.target.elements.request.value.trim();\n\n    if (!userData) {\n        iziToast.error({\n                        title: 'Error!',\n                        titleColor: '#fafafb', \n                        message: 'Enter your Request!',\n                        messageSize: '16',\n                        messageColor: '#fafafb',        \n                        backgroundColor: '#ef4040',\n                        position: 'topRight',\n                        theme: 'dark',\n                        close: true,\n                        closeOnEscape: true,\n                        closeOnClick: true,\n                        progressBar: true,\n                        progressBarColor: '#b51b1b',\n                        transitionIn: 'fadeInDown',\n                        transitionOut: 'fadeOutUp',\n                        iconUrl: imageUrlError,\n                        iconColor: '#fafafb',\n                        timeout: 3000,\n        });\n        return;\n    }\n\n    currentPage = 1;\n    showLoader();\n    hideLoadBtn();\n    \n    try {\n        const data = await getImages(userData, currentPage);\n        maxPage = Math.ceil(data.totalHits / perPage);\n        \n        if (maxPage === 0) {\n            iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    messageSize: '16',\n                    messageLineHeight: '1,5',\n                    messageColor: '#fafafb',\n                    backgroundColor: '#ef4040',\n                    position: 'topRight',\n                    theme: 'dark',\n                    close: true,\n                    closeOnEscape: true,\n                    closeOnClick: true,\n                    progressBar: true,\n                    progressBarColor: '#b51b1b',\n                    transitionIn: 'fadeInDown',\n                    transitionOut: 'fadeOutUp',\n                    iconUrl: imageUrlError,\n                    iconColor: '#fafafb',\n            });\n            hideLoader();\n            updateStatusBtn();\n            form.reset();\n            return;\n        }\n        \n        const markup = createImagesList(data.hits);\n        gallery.innerHTML = markup;\n        lightbox.refresh();\n        await loadAllImages();\n    } catch (err) {\n        console.log(`Error: ${err}`);\n    }\n\n    hideLoader();\n    updateStatusBtn();\n    form.reset();\n});\n\nmoreBtn.addEventListener('click', async () => {\n    currentPage++;\n    hideLoadBtn();\n    showLoader();\n    \n    try {\n        const data = await getImages(userData, currentPage);\n        const markup = createImagesList(data.hits);\n        gallery.insertAdjacentHTML('beforeend', markup);        \n        lightbox.refresh();\n        scrollDown();        \n    } catch {\n        console.log(`Error: ${err}`);\n    }\n    updateStatusBtn();\n    hideLoader();\n});"],"names":["getImages","userData","currentPage","axios","params","err","createImage","image","largeImageURL","webformatURL","tags","comments","downloads","likes","views","createImagesList","images","imageUrlError","imageUrlInfo","form","gallery","options","moreBtn","loader","maxPage","perPage","lightbox","SimpleLightbox","loadAllImages","imageLoadPromises","resolve","showLoader","hideLoader","showLoadBtn","hideLoadBtn","updateStatusBtn","iziToast","scrollDown","height","e","data","markup"],"mappings":"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"}